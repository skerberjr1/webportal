{% with id=widget.attrs.id %}<div{% if id %} id="{{ id }}"{% endif %}{% if widget.attrs.class %} class=""{% endif %}>
  <div class="btn-group" data-toggle="buttons">
  {% for group, options, index in widget.optgroups %}
    {% if group %}
      <li>{{ group }}<ul{% if id %} id="{{ id }}_{{ index }}"{% endif %}>
    {% endif %}
    {% for option in options %}
      {% if forloop.parentloop.counter == 8 %}
        </div><div class="btn-group" data-toggle="buttons">
      {% endif %}
      {% include option.template_name with widget=option %}
    {% endfor %}
    {% if group %}
    </ul></li>
    {% endif %}
  {% endfor %}
  </div>
</div>
{% endwith %}
